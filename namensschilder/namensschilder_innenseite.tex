
\documentclass[a4paper, 12pt]{letter}
\usepackage[total={210mm,297mm},top=0mm,left=0mm,includefoot]{geometry}
\usepackage[schilder, rowmode]{ticket}
\usepackage{graphicx,palatino}
\usepackage{xcolor}
\usepackage[utf8]{inputenc} 
\usepackage{datatool} 
\usepackage{ifthen}
\usepackage{ngerman}
\usepackage[sfdefault]{ClearSans} %% option 'sfdefault' activates Clear Sans as the default text font
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[normalem]{ulem}
\usepackage{enumitem}
\setlist[itemize]{leftmargin=5mm}
\setlist{nosep}

\ifdefined\BadgeCSV
\else
	\newcommand{\BadgeCSV}{bin/pseudodata.badges.csv}  
\fi

 %\overfullrule 10pt
 \hyphenpenalty 1000
 \exhyphenpenalty 10000

%\renewcommand*\rmdefault{iwona}
\newcounter{ticketcount}
\renewcommand{\ticketdefault}{}%
\makeatletter
\@boxedfalse % Rahmen um Namensschild
\@emptycrossmarkfalse% Falzmarken
\@cutmarkfalse % Schnittmarken
\makeatother

\newcommand{\striked}[3]{
	\ifthenelse{\equal{#3}{#2}}{
		\sout{#1}	
	}{
		#1 #2	
	}
}

\newcommand{\schildinnenlinks}[8]{\ticket{
\put(8,45){
  % in der \parbox werden auch lange namen umgebrochen
  \parbox{8.5cm}{
   % dezente Farbe, damit diese infos nicht auf die Vorderseite durchscheinen
    \color{gray} \raggedright \small
    
    %%Nachname,Vorname,Ticket,TShirt,TBand,TListe,AV,Mittag,WS,EX,OSM
	Order: #1 \\  	
  	Name: #2 \\
  	Mail: #3 \\
  	Ticket: #4 \\  	
  	%Tagungsband: \ifthenelse{\equal{#5}{True}}{Ja}{---------} \\
  	\striked{Tagungsband:}{ #5}{False} \\
  	\striked{T-Shirt:}{ #6}{} \\
  	\striked{Essen:}{ #7}{} \\
  	Anmerkungen: #8
%  	T-Shirt: \ifthenelse{\equal{#6}{}}{---------}{#6} \\
%  	Essen: \ifthenelse{\equal{#7}{}}{---------}{#7} \\
  }
  }
}}

\newcommand{\schildinnenrechts}[2]{\ticket{%
\put(2,50){
  % in der \parbox werden auch lange namen umgebrochen
  \parbox{90mm}{
   % dezente Farbe, damit diese infos nicht auf die Vorderseite durchscheinen
    \color{gray} \raggedright \small
    %%Nachname,Vorname,Ticket,TShirt,TBand,TListe,AV,Mittag,WS,EX,OSM
    Workshops: #1 \\ 
  	Exkursionen: #2 \\
  	%\begin{itemize}  \item Orchestrierung einer GDI Ã¼ber Docker \item Mapbender - Einstieg in den Aufbau von WebGIS-Anwendungen \item React basierte WebGIS Clients mit MapComponents \& MapLibre-gl \end{itemize}
  	%\begin{itemize} \item item1 \item 2\end{itemize}
  }
  }
}}

\begin{document} 
\DTLsetseparator{;}
%\DTLloaddb{CSV}{bin/badges.proof.csv}
\typeout{Load CSV: \BadgeCSV ...} 
\DTLloaddb{CSV}{\BadgeCSV}
\typeout{CSV loaded} 
%\DTLloadrawdb{CSV}{bin/badges.csv}
%\DTLsort{nachname}{CSV}

% order;name;nachname;mail;ticket;tl_name;tl_veroeff;tl_erhalten;
% essen;tshirt;av;tb;tb_adresse;osm_samstag;osm_name;exkursionen;workshops
\DTLforeach{CSV}{\order=order, \name=name,\type=ticket,\tshirt=tshirt,\mail=mail,
\av=av,\essen=essen,\ws=workshops, \ex=exkursionen, \tb=tb, \notizen=notes}
%\DTLforeach{CSV}{\person=Name,\nickname=268184}
{
  \typeout{Ticket \arabic{ticketcount}: \order  "\name "}  
  \schildinnenlinks{\order}{\name}{\mail}{\type}{\tb}{\tshirt}{\essen}{\notizen}
  \schildinnenrechts{\ws}{\ex}
  \addtocounter{ticketcount}{1}
} 
\end{document} 
